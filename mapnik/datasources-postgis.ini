[DEFAULT]
srs3 = +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs +over
srs4 = +proj=longlat +datum=WGS84
srs4326 = +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
srs900913 = +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs
srsmerc = +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs

[postgis_planet_osm]
dbname = planet_osm
estimate_extent = false
extent = -20037508,-20037508,20037508,20037508
host = localhost
layer_srs = %(srs3)s
password = None
port = 5432
type = postgis
user = osm

[postgis_ne11_merc]
dbname = naturalearth1.1_merc
estimate_extent = false
extent = -20037508,-20037508,20037508,20037508
host = localhost
layer_srs = %(srs3)s
password = None
type = postgis
user = nev

[postgis_toner_merc]
dbname = toner
estimate_extent = false
host = localhost
layer_srs = %(srs3)s
password = None
port = 5432
type = postgis
user = osm

[postgis_toner_4326]
dbname = toner
estimate_extent = false
host = localhost
layer_srs = %(srs4)s
password = None
port = 5432
type = postgis
user = osm



[admin1_labels_10m]
template = postgis_ne11_merc
table = admin_1_states_provinces_10m

[admin1_labels_50m]
template = postgis_ne11_merc
table = (SELECT *, SUBSTRING(hasc FROM 4) AS abbr FROM admin_1_states_provinces_50m) AS admin_1_states_provinces

[admin1_labels_50m_z4]
template = postgis_toner_merc
table = admin_1_labels_z4

[admin1_labels_50m_z5]
template = postgis_toner_merc
table = admin_1_labels_z5

[admin1_labels_50m_z6]
template = postgis_toner_merc
table = admin_1_labels_z6

[admin1_labels_50m_z7]
template = postgis_toner_merc
table = admin_1_labels_z7

[admin1_lines_10m]
template = postgis_ne11_merc
table = admin_1_states_provinces_lines_10m

[admin1_lines_110m]
template = postgis_ne11_merc
table = admin_1_states_provinces_lines_110m

[admin1_lines_50m]
template = postgis_ne11_merc
table = admin_1_states_provinces_lines_50m

[admin1_lines_osm]
template = postgis_planet_osm
table = (SELECT way,
	            name
	     FROM planet_osm_polygon
	     WHERE "boundary" IN ('administrative')
	        AND "admin_level" IN ('4')
	        AND "admin_level" NOT IN ('territorial_waters', 'territorial waters')
	     ORDER BY z_order ASC
	    
	    ) AS water

[aeroways]
template = postgis_planet_osm
table = (SELECT way,
	            name,
	            aeroway
	     FROM planet_osm_line
	     WHERE aeroway IS NOT NULL
	    
	    ) AS aeroway

[airports]
template = postgis_toner_merc
table = airports_simple_0d29_less_merc

[buildings]
template = postgis_planet_osm
table = (SELECT way, ST_Area(way) AS area FROM planet_osm_polygon WHERE building IS NOT NULL ORDER BY z_order ASC, way_area DESC) AS footprints

[buildings_stamen]
template = postgis_planet_osm
table = (SELECT way, 
	           ST_Area(way) AS area, 
	           osm_id
	      FROM planet_osm_polygon
	      WHERE building IS NOT NULL 
	         AND osm_id in (45074542)
	      ORDER BY z_order ASC, way_area DESC
	    ) AS footprints



[civic_areas]
template = postgis_planet_osm
table = (SELECT way,
	            name
	     FROM planet_osm_polygon
	     WHERE amenity IN ('school', 'college', 'university', 'bus_station',
	                       'ferry_terminal', 'hospital', 'kindergarten',
	                       'place_of_worship', 'public_building', 'townhall')
	     ORDER BY z_order ASC, way_area DESC
	    
	    ) AS civic

[coastline_10m__shore]
template = postgis_ne11_merc
table = coastline_10m

[continent_labels]
template = postgis_toner_4326
table = continents

[country_labels_110m_z3]
template = postgis_toner_merc
table = admin_0_countries_110m_points

[country_labels_110m_z4]
template = postgis_toner_merc
table = admin_0_labels_z4

[country_labels_110m_z5]
template = postgis_toner_merc
table = admin_0_labels_z5

[country_labels_110m_z6]
template = postgis_toner_merc
table = admin_0_labels_z6

[country_shapes_10m__shore]
template = postgis_ne11_merc
table = admin_0_countries_10m

[country_shapes_110m__shore]
template = postgis_ne11_merc
table = admin_0_countries_110m

[country_shapes_50m__shore]
template = postgis_ne11_merc
table = admin_0_countries_50m

[green_areas_hybrid_polygon_off]
template = postgis_planet_osm
table = (SELECT way,
	            name,
	            ST_Area(way) AS area,
	            (CASE WHEN leisure IN ('park', 'water_park', 'marina',
	                                   'playground',
	                                   'garden', 'common') THEN 'park'
	                  WHEN amenity IN ('graveyard') THEN 'cemetery'
	                  WHEN landuse IN ('cemetery') THEN 'cemetery'
	                  WHEN leisure IN ('sports_centre', 'golf_course',
	                                   'stadium', 'track', 'pitch') THEN 'sport'
	                  WHEN landuse IN ('recreation_ground') THEN 'sport'
	                  WHEN landuse IN ('forest', 'wood') THEN 'forest'
	             ELSE '' END) AS kind
	     FROM planet_osm_polygon
	     WHERE leisure IN ('park', 'water_park', 'marina',
	                       'playground', 'garden', 'common')
	        OR amenity IN ('graveyard')
	        OR landuse IN ('cemetery')
	        OR leisure IN ('sports_centre', 'golf_course', 'stadium',
	                       'track', 'pitch')
	        OR landuse IN ('recreation_ground')
	        OR landuse IN ('forest', 'wood')
	     ORDER BY z_order ASC, way_area DESC
	    
	    ) AS greens

[green_areas_labels]
template = postgis_planet_osm
table = (SELECT way,
	            name,
	            ST_Area(way) AS area,
	            (CASE WHEN leisure IN ('park', 'water_park', 'marina',
	                                   'nature_reserve', 'playground',
	                                   'garden', 'common') THEN 'park'
	                  WHEN amenity IN ('graveyard') THEN 'cemetery'
	                  WHEN landuse IN ('cemetery') THEN 'cemetery'
	                  WHEN leisure IN ('sports_centre', 'golf_course',
	                                   'stadium', 'track', 'pitch') THEN 'sport'
	                  WHEN landuse IN ('recreation_ground') THEN 'sport'
	                  WHEN landuse IN ('forest', 'wood') THEN 'forest'
	             ELSE '' END) AS kind
	     FROM planet_osm_polygon
	     WHERE leisure IN ('park', 'water_park', 'marina', 'nature_reserve',
	                       'playground', 'garden', 'common')
	        OR amenity IN ('graveyard')
	        OR landuse IN ('cemetery')
	        OR leisure IN ('sports_centre', 'golf_course', 'stadium',
	                       'track', 'pitch')
	        OR landuse IN ('recreation_ground')
	        OR landuse IN ('forest', 'wood')
	     ORDER BY z_order ASC, way_area DESC
	    
	    ) AS greens

[green_areas_transparent_hybrid_polygon_off]
template = postgis_planet_osm
table = (SELECT way,
	            name,
	            ST_Area(way) AS area
	     FROM planet_osm_polygon
	            WHERE "leisure" IN ('nature_reserve')
	     ORDER BY z_order ASC, way_area DESC
	    
	    ) AS greens

[lakes_10m__shore]
template = postgis_ne11_merc
table = lakes_10m

[lakes_110m__shore]
template = postgis_ne11_merc
table = lakes_110m

[lakes_50m__shore]
template = postgis_ne11_merc
table = lakes_50m

[land]
template = postgis_planet_osm
table = coastline

[land_shapes_110m__shore]
template = postgis_ne11_merc
table = land_110m

[major_road_labels]
template = postgis_planet_osm
table = (SELECT way,
	            (CASE WHEN highway = 'motorway'
	                  THEN ''
	                  ELSE name
	                  END) AS name,
	            (CASE WHEN highway = 'motorway' AND CHAR_LENGTH(ref) BETWEEN 2 AND 15
	                  THEN REGEXP_REPLACE(ref, E'\s*;\s*', E' / ', 'g')
	                  ELSE ''
	                  END) AS ref,
	            (CASE WHEN highway = 'motorway' AND CHAR_LENGTH(ref) BETWEEN 2 AND 15
	                  THEN CHAR_LENGTH(ref)
	                  ELSE 0
	                  END) AS ref_length,
	
	            highway,
	            ST_Length(way) AS length,
	
	            (CASE WHEN highway IN ('motorway', 'motorway_link') THEN 0
	                  WHEN highway IN ('footpath', 'track', 'footway', 'steps', 'pedestrian', 'path', 'cycleway') THEN 1
	                  WHEN railway IN ('rail', 'spur', 'subway', 'light_rail', 'tram', 'abandoned', 'disused', 'monorail') THEN 2
	                  WHEN highway IN ('trunk', 'trunk_link', 'primary', 'primary_link') THEN 3
	                  WHEN highway = 'secondary' THEN 4
	                  WHEN highway = 'tertiary' THEN 5
	                  ELSE 9 END) AS priority,
	            (CASE WHEN highway IN ('secondary', 'trunk', 'trunk_link', 'primary', 'primary_link', 'motorway', 'motorway_link') THEN 'major_road'
	                  WHEN highway IN ('residential', 'unclassified', 'service', 'minor', 'road', 'tertiary') THEN 'minor_road'
	                  WHEN railway IN ('rail', 'spur', 'subway', 'light_rail', 'tram', 'abandoned', 'disused', 'monorail') THEN 'rail'
	                  WHEN highway IN ('footpath', 'track', 'footway', 'steps', 'pedestrian', 'path', 'cycleway') THEN 'path'
	                  ELSE '' END) AS kind,
	            (CASE WHEN tunnel IN ('yes', 'true') THEN 'yes'
	                  ELSE 'no' END) AS is_tunnel,
	            (CASE WHEN bridge IN ('yes', 'true') THEN 'yes'
	                  ELSE 'no' END) AS is_bridge
	
	     FROM planet_osm_line
	
	     WHERE highway IN ('secondary', 'trunk', 'trunk_link', 'primary', 'primary_link', 'motorway', 'motorway_link')
	
	     ORDER BY priority ASC, length DESC)
	     
	     AS collected_lines

[marine_labels_10m]
template = postgis_ne11_merc
table = (SELECT * FROM geography_marine_polys_10m ORDER BY ScaleRank ASC) AS marine_polys

[marine_labels_110m]
template = postgis_ne11_merc
table = (SELECT * FROM geography_marine_polys_110m ORDER BY ScaleRank ASC) AS marine_polys

[marine_labels_50m]
template = postgis_ne11_merc
table = (SELECT * FROM geography_marine_polys_50m ORDER BY ScaleRank ASC) AS marine_polys

[minor_road_labels]
template = postgis_planet_osm
table = (SELECT way,
	            name,
	
	            highway,
	            ST_Length(way) AS length,
	
	            (CASE WHEN highway IN ('motorway', 'motorway_link') THEN 0
	                  WHEN highway IN ('footpath', 'track', 'footway', 'steps', 'pedestrian', 'path', 'cycleway') THEN 1
	                  WHEN railway IN ('rail', 'spur', 'subway', 'light_rail', 'tram', 'abandoned', 'disused', 'monorail') THEN 2
	                  WHEN highway IN ('trunk', 'trunk_link', 'primary', 'primary_link') THEN 3
	                  WHEN highway = 'secondary' THEN 4
	                  WHEN highway = 'tertiary' THEN 5
	                  ELSE 9 END) AS priority,
	            (CASE WHEN highway IN ('secondary', 'trunk', 'trunk_link', 'primary', 'primary_link', 'motorway', 'motorway_link') THEN 'major_road'
	                  WHEN highway IN ('residential', 'unclassified', 'service', 'minor', 'road', 'tertiary') THEN 'minor_road'
	                  WHEN railway IN ('rail', 'spur', 'subway', 'light_rail', 'tram', 'abandoned', 'disused', 'monorail') THEN 'rail'
	                  WHEN highway IN ('footpath', 'track', 'footway', 'steps', 'pedestrian', 'path', 'cycleway') THEN 'path'
	                  ELSE '' END) AS kind,
	            (CASE WHEN tunnel IN ('yes', 'true') THEN 'yes'
	                  ELSE 'no' END) AS is_tunnel,
	            (CASE WHEN bridge IN ('yes', 'true') THEN 'yes'
	                  ELSE 'no' END) AS is_bridge
	
	     FROM planet_osm_line
	
	     WHERE highway IN ('residential', 'unclassified', 'service', 'minor', 'road', 'tertiary')
	
	     ORDER BY priority ASC, length DESC)
	     
	     AS collected_lines

[motorways_z9]
template = postgis_planet_osm
geometry_field = way_zoom9
table = planet_osm_motorways

[ne_10m_admin_0_boundary_lines_land__country_boundary_10m]
template = postgis_toner_4326
table = ne_10m_admin_0_boundary_lines_land

[ne_10m_admin_0_boundary_lines_land__country_boundary_10m_whiteout]
template = postgis_toner_4326
table = ne_10m_admin_0_boundary_lines_land

[osm_place_points]
template = postgis_planet_osm
table = (SELECT *,
	            COALESCE(z_order, 0) AS coalesced_z_order,
	            (CASE WHEN place = 'city' THEN 0
	                  WHEN place = 'town' THEN 1
	                  WHEN place = 'village' THEN 2
	                  ELSE 3 END) AS priority
	     FROM planet_osm_point
	     WHERE place IN ('city', 'town', 'hamlet', 'village')
	     ORDER BY priority ASC, coalesced_z_order DESC
	    ) AS places

[parking_areas]
template = postgis_planet_osm
table = (SELECT way,
	            name
	     FROM planet_osm_polygon
	     WHERE amenity IN ('parking')
	     ORDER BY z_order ASC, way_area DESC
	    
	    ) AS parking

[poi_station_labels]
template = postgis_planet_osm
table = (SELECT way,
	            name,
	            railway,
	            highway
	     FROM planet_osm_point
		 WHERE "railway" IN ('station') OR
			"highway" IN ('bus_stop')
	     ORDER BY z_order ASC, way DESC
	    
	    ) AS poi

[water_bodies]
template = postgis_planet_osm
table = (SELECT way,
	            ST_Area(way) AS area
	     FROM planet_osm_polygon
	     WHERE "natural" IN ('water', 'bay')
	        OR waterway IN ('riverbank')
	        OR landuse IN ('reservoir')
	     ORDER BY z_order ASC, way_area DESC
	    
	    ) AS water

[water_bodies_labels]
template = postgis_planet_osm
table = (SELECT way,
	            name,
	            ST_Area(way) AS area,
	            (CASE WHEN "natural" IN ('water', 'bay') THEN 'sea'
	                  WHEN waterway IN ('riverbank') THEN 'river'
	                  WHEN landuse IN ('reservoir') THEN 'lake'
	             ELSE '' END) AS kind
	     FROM planet_osm_polygon
	     WHERE "natural" IN ('water', 'bay')
	        OR waterway IN ('riverbank')
	        OR landuse IN ('reservoir')
	     ORDER BY z_order ASC, way_area DESC
	    
	    ) AS water

[z10_roads]
template = postgis_planet_osm
table = planet_osm_line_z10

[z11_roads]
template = postgis_planet_osm
table = planet_osm_line_z11

[z12_roads]
template = postgis_planet_osm
table = planet_osm_line_z12

[z13_roads]
template = postgis_planet_osm
table = planet_osm_line_z13

[z14_roads]
template = postgis_planet_osm
table = planet_osm_line_z14

[z15plus_roads]
template = postgis_planet_osm
table = planet_osm_line_z15plus
